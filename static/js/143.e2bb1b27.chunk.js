"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[143],{7505:function(e,r,n){var t=n(8174),o=n(184);r.Z=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(e){var r=e.closeToast,n=e.errorMessage;return(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{children:["Error: ",n]}),(0,o.jsx)("button",{onClick:r,className:"rounded-md border border-black border-solid px-2",children:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u0443\u0442\u0438\u0441\u044f \u0434\u043e \u043f\u043e\u0448\u0443\u043a\u0443"})]})};t.Am.error((0,o.jsx)(n,{errorMessage:e,errorClose:r}),{closeButton:!1,onClose:function(e){return e.errorClose&&e.errorClose()},autoClose:5e3,transition:t.LG,pauseOnFocusLoss:!1,position:t.Am.POSITION.TOP_CENTER})}},3512:function(e,r,n){n.d(r,{Z:function(){return u}});var t,o=n(8402),s=n(168),a=n(6444).ZP.div(t||(t=(0,s.Z)(["\n  display: flex;\n  justify-content: center;\n"]))),i=n(184),u=function(){return(0,i.jsx)(a,{children:(0,i.jsx)(o.s5,{strokeColor:"#3f51b5",strokeWidth:"4",animationDuration:"1",width:"70",visible:!0})})}},7907:function(e,r,n){n.d(r,{Uk:function(){return u},W2:function(){return s},ZP:function(){return l},h4:function(){return a},rU:function(){return i}});var t=n(1087),o=n(184),s=function(e){var r=e.children;return(0,o.jsx)("div",{className:"container max-w-7xl  my-0 mx-auto py-0 px-4 pb-16",children:r})},a=function(e){var r=e.children;return(0,o.jsx)("header",{className:"flex items-center justify-between gap-4 px-0 py-4 mb-4 border-b  border-black border-solid ",children:(0,o.jsxs)("nav",{className:"flex gap-4",children:[" ",r," "]})})},i=function(e){var r=e.to,n=e.state,s=e.children;return(0,o.jsx)(t.OL,{to:r,state:n,className:"block w-full px-2 rounded-md hover:bg-sky-100",children:s})},u=function(e){var r=e.to,n=e.children,s="py-2 px-8 rounded-md hover:bg-sky-400 hover:shadow hover:shadow-sky-500 border  border-stone-400 border-solid ",a="".concat(s," bg-sky-400  text-white"),i="".concat(s," bg-sky-200 text-black");return(0,o.jsx)(t.OL,{to:r,className:function(e){return e.isActive?a:i},children:n})},l=function(e){var r=e.link,n=e.children;return(0,o.jsx)("button",{onClick:function(){return r()},className:"bg-sky-200 px-3 rounded-md flex items-center gap-2 border border-stone-400 border-solid  hover:bg-sky-400 hover:shadow hover:shadow-sky-500",children:n})}},3143:function(e,r,n){n.r(r),n.d(r,{default:function(){return g}});var t=n(1413),o=n(9439),s=n(2791),a=n(7689),i=n(1087),u=n(8174),l=n(3749),c=n(3512),d=n(7692),f=n(184),h=function(e){var r=e.onSubmit;return(0,f.jsx)("div",{className:"flex items-center justify-center px-6 py-3 text-white  bg-sky-600 z-50 shadow-md ",children:(0,f.jsxs)("form",{onSubmit:r,className:"flex items-center w-full max-w-xl  overflow-hidden bg-white rounded",children:[(0,f.jsx)("button",{type:"submit",className:"inline-block w-12 h-12 bg-inherit text-sky-500  opacity-60 transition-opacity duration-300 hover:opacity-100",children:(0,f.jsx)(d.WW5,{className:"block h-full w-full"})}),(0,f.jsx)("input",{name:"query",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movies",className:"inline-block w-full px-1 outline-none  font-sans font-normal text-xl text-black  placeholder:text-lg"})]})})},m=n(2007),v=n.n(m),p=n(7907),x=function(e){var r=e.films,n=e.location;return(0,f.jsx)("ul",{className:"pt-4 flex flex-col gap-1 w-max",children:r.map((function(e){return(0,f.jsx)("li",{className:"w-full",children:(0,f.jsxs)(p.rU,{to:"/Movies/".concat(e.id),state:{from:n},children:[e.name," ",e.original_title]})},e.id)}))})};x.prototype={films:v().array.isRequired,location:v().shape};var b=x,y=n(7505),g=function(){var e,r=(0,a.TH)(),n=(0,a.s0)(),d=(0,i.lr)(""),m=(0,o.Z)(d,2),v=m[0],p=m[1],x=(0,s.useState)({query:v.get("query"),page:1}),g=(0,o.Z)(x,2),k=g[0],w=g[1],j=(0,l.i)("search/company",k),Z=j.data,N=j.isLoaded,C=j.error,_=null!==(e=r.pathname)&&void 0!==e?e:"/",q=(0,s.useCallback)((function(){return n(_)}),[_,n]);(0,s.useEffect)((function(){(null===Z||void 0===Z?void 0:Z.total_results)<=0&&k.query&&(0,y.Z)("\u043d\u0435\u043c\u0430 \u043d\u0456\u043a\u043e\u0433\u043e !",q)}),[Z,q]),C&&u.Am.error(C);var S=(null===Z||void 0===Z?void 0:Z.total_results)>0&&!C,A=N&&!C,L=null===Z||void 0===Z?void 0:Z.results;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(h,{onSubmit:function(e){e.preventDefault();var r=e.currentTarget.elements.query,n=e.currentTarget.elements.query.value.trim();if(n){if(k.query===n)return u.Am.error('\u0412\u0436\u0435 \u0448\u0443\u043a\u0430\u043b\u0438 "'.concat(n,'" ')),void(r.value="");p({query:n}),w((function(e){return(0,t.Z)((0,t.Z)({},e),{},{query:n})})),r.value=""}else u.Am.error("\u0412\u0432\u0435\u0434\u0438 ")}}),A&&(0,f.jsx)(c.Z,{}),S&&(0,f.jsx)(b,{films:L,location:r})]})}},3749:function(e,r,n){n.d(r,{i:function(){return f}});var t=n(1413),o=n(9439),s=n(5861),a=n(4687),i=n.n(a),u=n(1243),l=n(2791);function c(e){return d.apply(this,arguments)}function d(){return d=(0,s.Z)(i().mark((function e(r){var n,o,s,a,l=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:null,s={baseURL:"https://api.themoviedb.org/3/",params:{api_key:"4c5709de239d230c95a29a6c1868ce65"}},(n=l.length>1&&void 0!==l[1]?l[1]:null)&&(s.signal=n.signal),o&&(s.params=(0,t.Z)((0,t.Z)({},s.params),o)),e.next=7,u.Z.get(r,s);case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}var f=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=(0,l.useState)(null),t=(0,o.Z)(n,2),a=t[0],u=t[1],d=(0,l.useState)(""),f=(0,o.Z)(d,2),h=f[0],m=f[1],v=(0,l.useState)(!0),p=(0,o.Z)(v,2),x=p[0],b=p[1];return(0,l.useEffect)((function(){var n=new AbortController;return(0,s.Z)(i().mark((function t(){var o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e){t.next=6;break}return t.next=4,c(e,n,r);case 4:o=t.sent,u(o.data);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),"canceled"!==t.t0.message&&m(t.t0.message);case 11:return t.prev=11,b(!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})))(),function(){return n.abort()}}),[r,e]),{data:a,error:h,isLoaded:x}}}}]);
//# sourceMappingURL=143.e2bb1b27.chunk.js.map