"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[650],{7505:function(e,t,r){var n=r(8174),o=r(184);t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=function(e){var t=e.closeToast,r=e.errorMessage;return(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{children:["Error: ",r]}),(0,o.jsx)("button",{onClick:t,className:"rounded-md border border-black border-solid px-2",children:"\u041f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\u0443\u0442\u0438\u0441\u044f \u0434\u043e \u043f\u043e\u0448\u0443\u043a\u0443"})]})};n.Am.error((0,o.jsx)(r,{errorMessage:e,errorClose:t}),{closeButton:!1,onClose:function(e){return e.errorClose&&e.errorClose()},autoClose:5e3,transition:n.LG,pauseOnFocusLoss:!1,position:n.Am.POSITION.TOP_CENTER})}},3512:function(e,t,r){r.d(t,{Z:function(){return l}});var n,o=r(8402),s=r(168),a=r(6444).ZP.div(n||(n=(0,s.Z)(["\n  display: flex;\n  justify-content: center;\n"]))),i=r(184),l=function(){return(0,i.jsx)(a,{children:(0,i.jsx)(o.s5,{strokeColor:"#3f51b5",strokeWidth:"4",animationDuration:"1",width:"70",visible:!0})})}},6368:function(e,t,r){var n=r(2007),o=r.n(n),s=r(1087),a=r(184),i=function(e){var t=e.title,r=void 0===t?null:t,n=e.films,o=e.location;return(0,a.jsxs)(a.Fragment,{children:[r&&(0,a.jsx)("h1",{className:" text-center text-2xl font-semibold text-stone-800",children:r}),(0,a.jsx)("ul",{className:"gap-6 grid pt-6 grid-cols-2 md:grid-cols-3 lg:grid-cols-4  xl:grid-cols-5 ",children:n.map((function(e){return(0,a.jsx)("li",{className:"rounded-md border border-black border-solid overflow-hidden transition-all duration-300  hover:shadow-mm hover:shadow-sky-300 hover:scale-105 ",children:(0,a.jsxs)(s.OL,{className:"p-0 ",to:"/Movies/".concat(e.id),state:{from:o},children:[(0,a.jsx)("img",{className:"w-full p-0",src:e.poster_path?"https://image.tmdb.org/t/p/w185/".concat(e.poster_path):"https://via.placeholder.com/185x280/cccccc/db0404.jpg?text=No+image",width:185,height:280,onError:function(e){var t=e.currentTarget;t.onerror=null,t.src="https://via.placeholder.com/185x280/cccccc/db0404.jpg?text=No+image"},alt:"Poster: ".concat(e.title)}),(0,a.jsx)("p",{className:"mx-2 font-sans text-sm font-medium truncate ...",children:e.original_title})]})},e.id)}))})]})};i.prototype={title:o().string,films:o().array.isRequired,location:o().shape},t.Z=i},6650:function(e,t,r){r.r(t),r.d(t,{default:function(){return v}});var n=r(1413),o=r(9439),s=r(2791),a=r(7689),i=r(1087),l=r(8174),c=r(3749),u=r(3512),d=r(7692),m=r(184),f=function(e){var t=e.onSubmit;return(0,m.jsx)("div",{className:"flex items-center justify-center px-6 py-3 text-white  bg-sky-600 z-50 shadow-md ",children:(0,m.jsxs)("form",{onSubmit:t,className:"flex items-center w-full max-w-xl  overflow-hidden bg-white rounded",children:[(0,m.jsx)("button",{type:"submit",className:"inline-block w-12 h-12 bg-inherit text-sky-500  opacity-60 transition-opacity duration-300 hover:opacity-100",children:(0,m.jsx)(d.WW5,{className:"block h-full w-full"})}),(0,m.jsx)("input",{name:"query",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movies",className:"inline-block w-full px-1 outline-none  font-sans font-normal text-xl text-black  placeholder:text-lg"})]})})},h=r(7505),p=r(6368),v=function(){var e,t=(0,a.TH)(),r=(0,a.s0)(),d=(0,i.lr)(""),v=(0,o.Z)(d,2),x=v[0],g=v[1],b=(0,s.useState)({query:x.get("query"),page:1}),y=(0,o.Z)(b,2),j=y[0],w=y[1],k=(0,c.i)("search/movie",j),Z=k.data,N=k.isLoaded,_=k.error,C=null!==(e=t.pathname)&&void 0!==e?e:"/",q=(0,s.useCallback)((function(){return r(C)}),[C,r]);(0,s.useEffect)((function(){(null===Z||void 0===Z?void 0:Z.total_results)<=0&&j.query&&(0,h.Z)("\u043d\u0435\u043c\u0430 \u043d\u0456\u043a\u043e\u0433\u043e !",q)}),[Z,q]),_&&l.Am.error(_);var S=(null===Z||void 0===Z?void 0:Z.total_results)>0&&!_,T=N&&!_,A=null===Z||void 0===Z?void 0:Z.results;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(f,{onSubmit:function(e){e.preventDefault();var t=e.currentTarget.elements.query,r=e.currentTarget.elements.query.value.trim();if(r){if(j.query===r)return l.Am.error('\u0412\u0436\u0435 \u0448\u0443\u043a\u0430\u043b\u0438 "'.concat(r,'" ')),void(t.value="");g({query:r}),w((function(e){return(0,n.Z)((0,n.Z)({},e),{},{query:r})})),t.value=""}else l.Am.error("\u0412\u0432\u0435\u0434\u0438 ")}}),T&&(0,m.jsx)(u.Z,{}),S&&(0,m.jsx)(p.Z,{title:'\u0417\u0430 \u043f\u043e\u0448\u0443\u043a\u043e\u043c "'.concat(j.query,'"'),films:A,location:t})]})}},3749:function(e,t,r){r.d(t,{i:function(){return m}});var n=r(1413),o=r(9439),s=r(5861),a=r(4687),i=r.n(a),l=r(1243),c=r(2791);function u(e){return d.apply(this,arguments)}function d(){return d=(0,s.Z)(i().mark((function e(t){var r,o,s,a,c=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=c.length>2&&void 0!==c[2]?c[2]:null,s={baseURL:"https://api.themoviedb.org/3/",params:{api_key:"4c5709de239d230c95a29a6c1868ce65"}},(r=c.length>1&&void 0!==c[1]?c[1]:null)&&(s.signal=r.signal),o&&(s.params=(0,n.Z)((0,n.Z)({},s.params),o)),e.next=7,l.Z.get(t,s);case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}var m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=(0,c.useState)(null),n=(0,o.Z)(r,2),a=n[0],l=n[1],d=(0,c.useState)(""),m=(0,o.Z)(d,2),f=m[0],h=m[1],p=(0,c.useState)(!0),v=(0,o.Z)(p,2),x=v[0],g=v[1];return(0,c.useEffect)((function(){var r=new AbortController;return(0,s.Z)(i().mark((function n(){var o;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!e){n.next=6;break}return n.next=4,u(e,r,t);case 4:o=n.sent,l(o.data);case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),"canceled"!==n.t0.message&&h(n.t0.message);case 11:return n.prev=11,g(!1),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[0,8,11,14]])})))(),function(){return r.abort()}}),[t,e]),{data:a,error:f,isLoaded:x}}}}]);
//# sourceMappingURL=650.4222bc21.chunk.js.map